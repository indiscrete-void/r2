name: r2
version: 0.1.0.0
author: indiscrete_void
maintainer: indiscrete.void@gmail.com
license: BSD3

language: Haskell2010

ghc-options: 
  - -fdefer-typed-holes
  - -Weverything
  - -Wno-missing-safe-haskell-mode
  - -Wno-safe
  - -Wno-unsafe
  - -Wno-missing-import-lists
  - -Wno-all-missed-specialisations
  - -Wno-missed-specialisations
  - -Wno-missing-local-signatures
  - -Wno-monomorphism-restriction
  - -Wno-implicit-prelude
  - -threaded
  - -Wno-missing-kind-signatures
  - -fplugin=Polysemy.Plugin
  - -Wno-orphans
  - -Wno-name-shadowing

default-extensions:
  - DataKinds
  - FlexibleContexts
  - GADTs
  - LambdaCase
  - PolyKinds
  - RankNTypes
  - ScopedTypeVariables
  - TypeApplications
  - TypeOperators
  - TypeFamilies
  - ImportQualifiedPost
  - AllowAmbiguousTypes
  - TemplateHaskell
  - BlockArguments
  - DeriveGeneric
  - DerivingStrategies
  - EmptyDataDeriving
  - OverloadedStrings
  - FlexibleInstances
  - QuantifiedConstraints
  - IncoherentInstances
  - StandaloneKindSignatures
  - DerivingVia
  - RecordWildCards
  - NamedFieldPuns
  - ViewPatterns

dependencies:
  - base >=4.17.2.1 && <5
  - bytestring
  - binary
  - transformers
  - text
  - async
  - containers
  - optparse-applicative
  - unix
  - network
  - polysemy
  - polysemy-plugin
  - polysemy-scoped-process >=0.2.0.0
  - polysemy-transport >=0.18.0.0
  - polysemy-conc
  - stm-chans
  - extra
  - random
  - monad-loops
  - aeson
  - base64-bytestring
  - base58-bytestring
  - data-dword
  - time-units

library:
  source-dirs: src
  exposed-modules:
    - R2
    - R2.Random
    - R2.DSL
    - R2.Bus
    - R2.Options
    - R2.Socket
    - R2.Peer
    - R2.Peer.Proto
    - R2.Peer.Log
    - R2.Peer.Conn
    - R2.Peer.Storage
    - R2.Client
    - R2.Daemon
    - R2.Daemon.Handler
    - R2.Daemon.Sockets
    - R2.Daemon.Sockets.Accept
    - Serial.Aeson.Options

executables:
  r2d:
    main: R2/Daemon/Main.hs
    source-dirs: daemon
    dependencies:
      - r2

  r2:
    main: R2/Client/Main.hs
    source-dirs: cli
    dependencies:
      - r2

  r2-simple-example:
    main: Simple/Main.hs
    source-dirs: examples
    dependencies:
      - r2

  r2dm:
    main: R2/Manager/Main.hs
    source-dirs: manager
    dependencies:
      - r2
      - tomland

tests:
  tests:
    main: Main.hs
    source-dirs: tests
    dependencies:
      - r2
      - tasty
      - tasty-hunit
